<html>
<head>
    <meta charset="utf-8">
    <title>优惠券</title>
    <meta name="Keywords" content="网购，九块九，网购省钱，淘宝优惠券，天猫优惠券，内部优惠券，9块9包邮，天天特价">
    <meta name="Description" content="哔唛网领券购物专区，专注全网商家内部优惠券活动,每日送出大量商家内部优惠券，特价团购福利，提供当季全网最具性价比的包邮产品,精选万人团商品超值好货,超低价好货享疯狂特价促销,让你全面安心享受网上购物乐趣!">
    <link rel="stylesheet" href="/web/css/productDetail.css">
    <link rel="stylesheet" href="/web/css/base.css">
    <link rel="stylesheet" href="/web/css/index2.css">
    <link rel="shortcut icon" href="/web/images/favicon.ico"/>
    <link rel="bookmark" href="/web/images/favicon.ico"/>
    <style>
        .article-catalog {
            font-size: 15px;
            font-weight: bold;
        }

        .article-catalog div {
            margin-bottom: 15px;
        }

        .article-item-title {
            font-size: 14px;
            font-weight: bold;
            margin-top: 50px;
        }

        .article-item-content {
            font-size: 14px;
            margin-top: 10px;
            line-height: 25px;
            text-indent: 30px;
        }

        .article-item-descp {
            margin-top: 15px;
        }

        .article-item-descp-title {
            font-size: 15px;
            font-weight: bold;
        }

        .article-item-descp-bar, .article-item-descp-author, .article-item-descp-date {
            font-size: 14px;
            margin-right: 15px;
            color: #ff5e54;
        }

        .article-catalog-title {
            margin-right: 20px;
        }

        .article-catalog-title-free {
            margin-left: 70px;
        }

        .article-count {
            margin-top: 35px;
        }

        .article-count-num {
            color: #ff5e54;
        }

        .shop-generalize {
            border: 1px solid gray;
            margin-top: 65px;
            padding: 5px;
        }

        .prod-generalize {
            width: 350px;
        }

        .shop-generalize div {
            line-height: 30px;
        }

        .shop-generalize div span {
            display: inline-block;
            width: 80px;
        }

        .last-article {
            margin-top: 20px;
            line-height: 30px;
        }

        .hot-shop {
            margin-top: 30px;
        }

        .line {
            display: inline-block;
            border: 2px solid red;
            height: 10px;
            position: relative;
            top: 2px;
            margin-right: 10px;
        }

        .prod-detail {
            width: 750px;
        }

        .page-num {
            float: left;
            text-align: center;
            width: 750px;
            margin: 40px 0px 40px 0px;
        }

        .page-num span {
            padding: 10px;
            background: #eee;
            margin: 5px;
            cursor: pointer;
        }

        #curr-page {
            background-color: #ea6b18;
        }

        .article-item {
            cursor: pointer;
        }

        .prod-detail {
            margin: 20px 7%;
            float: left;
            width: 750px;
        }

        .prod {
            min-width: 1300px;
            width: 1200px;
            margin: 0 auto;
        }

        .catalog-item {
            margin-left: 5px;
        }

        .article-catalog-title {
            margin-right: 10px;
        }

        .article-catalog-title-free {
            margin-left: 60px;
        }
    </style>
</head>
<body>
<div class="header"></div>
<div id="pageFlag" style="display: none">article</div>
<section>
    <div class="hot-brand clearfix" style="display: none">
        <div class="hot-brand-title">
            <span class="hot-brand-text">热门店铺精选</span>
            <span class="hot-shop-next">换一批</span>
        </div>
        <div class="shop-list"></div>
    </div>
    <div class="hot-prod" style="display: none">
        <div class="hot-brand-title">
            <span class="hot-prod-text">热门商品精选</span>
            <span class="hot-prod-next">换一批</span>
        </div>
        <div class="moldbaby clearfix"></div>
    </div>

    <div id="dataArea">
        <div class="prod clearfix">
            <div class="prod-detail">
                <div class="article-catalog">
                    <div>
                        <span class="article-catalog-title">类别：</span>
                        <span class="catalog-item"><a href="article.html?id=1">家居装修</a></span>
                        <span class="catalog-item"><a href="article.html?id=2">选购导购</a></span>
                        <span class="catalog-item"><a href="article.html?id=3">旅游景点</a></span>
                        <span class="catalog-item"><a href="article.html?id=4">娱乐趣闻</a></span>
                        <span class="catalog-item"><a href="article.html?id=5">健康养生</a></span>
                        <span class="catalog-item"><a href="article.html?id=6">日常生活</a></span>
                        <span class="catalog-item"><a href="article.html?id=7">母婴育儿</a></span>
                        <span class="catalog-item"><a href="article.html?id=8">数码科技</a></span>
                        <span class="catalog-item"><a href="article.html?id=9">游戏资讯</a></span>
                    </div>
                    <div>
                        <span class="article-catalog-title-free"></span>
                        <span class="catalog-item"><a href="article.html?id=10">服装鞋包</a></span>
                        <span class="catalog-item"><a href="article.html?id=11">美妆护肤</a></span>
                        <span class="catalog-item"><a href="article.html?id=12">城市房产</a></span>
                        <span class="catalog-item"><a href="article.html?id=13">金融理财</a></span>
                        <span class="catalog-item"><a href="article.html?id=14">汽车出行</a></span>
                        <span class="catalog-item"><a href="article.html?id=15">品牌热点</a></span>
                        <span class="catalog-item"><a href="article.html?id=16">人生指南</a></span>
                        <span class="catalog-item"><a href="article.html?id=17">美食菜谱</a></span>
                        <span class="catalog-item"><a href="article.html?id=18">奢侈时尚</a></span>
                    </div>
                </div>
                <div class="article-list"></div>

                <!--分页-->
                <div class="page-num"></div>
            </div>

            <div class="prod-generalize">
                <div class="article-count">共有<span class="article-count-num"></span>篇文章</div>
                <div class="shop-generalize"></div>
                <div class="last-article"></div>
                <div>
                    <div class="hot-shop"><span class="line"></span>热门店铺</div>
                    <div class="content-list"></div>
                </div>
            </div>
        </div>
        <div class="hot-prod">
            <div class="boutique">热门商品精选</div>
            <div class=" moldbaby clearfix"></div>
        </div>
    </div>

    <!-- 返回顶部 -->
    <div class="back-to-top">top</div>
</section>
<footer class="footer"></footer>
</body>
<script src="/js/jquery.min.js"></script>
<script src="/js/paging.js"></script>
<script src="/web/js/app.js"></script>
<script>
    var prodId = getParameter("prodId");
    var id = getParameter("id");

    $(function () {
        init();
        setTimeout(function () {
            $(".search-input").bind("keyup", function (even) {
                if (even.keyCode == "13") {
                    searchArticle();
                }
            });
        }, 2000)

        getMeta();
        getArticleList(1);

        var param = {}
        app.getArticleCount(param, function (result) {
            if (result.code == 200) {
                var data = result.data;
                $(".article-count-num").text(data);
            }
        });

        var param = {};
        param.page = 1;
        param.size = 5;
        app.getArticleList(param, function (result) {
            var html = '<div><span class="line"></span>最新文章</div>';
            if (result.code == 200) {
                var data = result.data.articleList;
                for (var i = 0; i < data.length; i++) {
                    var item = data[i];
                    html += '<div>--> ' + getTitle(item.title) + '</div>';
                }

                $(".last-article").html(html);
            }
        });

        var param = {}
        param.page = 1;
        param.size = 20;
        app.getWebGeneralize(param, function (result) {
            if (result.code == 200) {
                var data = result.data.list;
                var html = '<div>商城推荐</div>';
                for (var i = 0; i < data.length; i++) {
                    var value = data[i];
                    if (i % 4 == 0) {
                        html += '<div>';
                        html += '<span><a href="' + value.url + '" target="_blank">' + value.webName + '</a></span>';
                    } else if (i % 4 == 3) {
                        html += '<span><a href="' + value.url + '" target="_blank">' + value.webName + '</a></span>';
                        html += '</div>';
                    } else {
                        html += '<span><a href="' + value.url + '" target="_blank">' + value.webName + '</a></span>';
                    }

                }
                $(".shop-generalize").html(html);
            }
        });

        getShop(Math.ceil(Math.random() * 10));
    });

    function getMeta() {
        var param = {"id": 18};
        app.getMeta(param, function (result) {
            if (result.code == 200) {
                var data = result.data;
                $("head > title").text(data.title);
                $('head > meta[name="Keywords"]').attr("content", data.keyWords);
                $('head > meta[name="Description"]').attr("content", data.description);
            }
        });
    }

    function getArticleList(page, title) {
        var param = {};
        param.type = id;
        param.page = page;
        param.size = 10;
        if (title != null) {
            param.title = title;
        }
        app.getArticleList(param, function (result) {
            var html = "";
            if (result.code == 200) {
                var data = result.data.list;
                for (var i = 0; i < data.length; i++) {
                    var item = data[i];
                    html += '<div class="article-item" onclick="articleDetail(' + item.id + ')">' +
                        '<div class="article-item-title">' + item.title + '</div>' +
                        '<div class="article-item-content">' + item.contentDescp + '</div>' +
                        '<div class="article-item-descp">' +
                        '<span>' +
                        '<span class="article-item-descp-title">栏目：</span>' +
                        '<span class="article-item-descp-bar">' + item.type + '</span>' +
                        '</span>' +
                        '<span>' +
                        '<span class="article-item-descp-title">作者：</span>' +
                        '<span class="article-item-descp-author">' + item.author + '</span>' +
                        '</span>' +
                        '<span>' +
                        '<span class="article-item-descp-title">时间：</span>' +
                        '<span class="article-item-descp-date">' + item.cTime + '</span>' +
                        '</span>' +
                        '</div>' +
                        '</div>';
                }

                $(".article-list").html(html);

                var totalPage = result.data.pages;
                var currPage = result.data.pageNum;

                splitPage(totalPage, currPage, ".page-num",
                    function (index) {
                        if (index != 1) {
                            getArticleList(index - 1, title);
                        }
                    }, function (index) {
                        index = parseInt(index);
                        if (index != totalPage) {
                            getArticleList(index + 1, title);
                        }
                    }, function (index) {
                        getArticleList(index, title);
                    });
            }
        });
    }
    function getTitle(title) {
        if (title.length > 15) {
            title = title.substr(0, 15) + "...";
        }
        return title;
    }
    function articleDetail(id) {
        window.open("articleDetail.html?id=" + id);
    }
    function init() {
        $(".header").load("header.html");
        $(".footer").load("footer.html");
        app.getSelectedNav(5);
        getProductDetail();
        getGeneralizeProduct();
        getProduct();
    }


    function getShopImage(type) {
        switch (type) {
            case "1":
                return "./images/tm.jpg";
                break;
            case "2":
                return "./images/jd.jpg";
                break;
            case "3":
                return "./images/sn.jpg";
                break;
            case "4":
                return "./images/yhd.jpg";
                break;
            case "5":
                return "./images/dd.jpg";
                break;
            case "6":
                return "./images/gm.jpg";
                break;
            case "7":
                return "./images/tb.jpg";
                break;
            default:
                return "./images/qt.jpg";
                break;
        }
    }

    function getShopId(type) {
        if (type == "G") {
            return "1";
        } else if (type == "W") {
            return "2";
        } else if (type == "T") {
            return "3";
        }
    }
    function getShopType(type) {
        switch (type) {
            case "1":
                return "天猫";
                break;
            case "2":
                return "京东";
                break;
            case "3":
                return "苏宁易购";
                break;
            case "4":
                return "一号店";
                break;
            case "5":
                return "当当网";
                break;
            case "6":
                return "国美";
                break;
            case "7":
                return "淘宝店";
                break;
            default:
                return "";
                break;
        }
    }
    function getProductDetail() {
        var param = {"prodId": prodId};
        app.getProductDetail(param, function (result) {
            if (result.code == 200) {
                var data = result.data;

                var html = '<img src="' + data.banner + '" class="prod-detail-img">' +
                    '<div class="prod-desc">' +
                    '<div class="prod-desc-title">' + data.name + '</div>' +
                    '<div class="prod-desc-price">' +
                    '<span class="prod-desc-price-dx">(独享)</span>' +
                    '<span>券后价 </span>' +
                    '<span class="prod-desc-price-now">¥' + data.discountPrice + '</span>' +
                    '<span> 在售价</span>' +
                    '<span class="prod-desc-price-old">¥' + data.price + '</span>' +
                    '</div>' +
                    '<div class="prod-desc-discount">' +
                    '<div class="prod-desc-discount-coupon">' +
                    '<div>优惠券</div>' +
                    '<div>¥' + (data.price - data.discountPrice).toFixed(2) + '</div>' +
                    '</div>' +
                    '<div class="prod-desc-discount-go">领券购买</div>' +
                    '</div>' +
                    '</div>';
            }
            $(".prod-detail").html(html);
            $("head > title").text(data.name);
            $(".prod-desc-discount-go").click(function () {
                window.open(data.prodGeneralize);
            })
        });
    }
    function getGeneralizeProduct() {
        var param = {};
        param.page = 1;
        param.size = 2;
        app.getGeneralizeProduct(param, function (result) {
            if (result.code == 200) {
                var html = '';
                var data = result.data.list;
                for (var i = 0; i < data.length; i++) {
                    var product = data[i];
                    html += '<div class="prod-generalize-item" index="' + i + '">' +
                        '<div class="prod-generalize-item-img">' +
                        '<img src="' + product.banner + '">' +
                        '</div>' +
                        '<div class="prod-generalize-item-price">券后¥' + (product.price - product.discountPrice).toFixed(2) + '</div>' +
                        '</div>'
                }
                $(".prod-generalize-list").html(html);

                $(".prod-generalize-item").click(function () {
                    var index = $(this).attr("index");
                    location.href = "productDetail.html?prodId=" + data[index].prodId;
                });
            }
        });
    }
    function getProduct() {
        var param = {};
        param.page = 1;
        param.size = 4;

        app.getProductList(param, function (result) {
            if (result.code == 200) {
                var html = '';
                var data = result.data.prodList;
                for (var i = 0; i < data.length; i++) {
                    var product = data[i];
                    html += '<div class="moldbaby-subject" index="' + i + '">' +
                        '<div class="moldbaby-subject-img">' +
                        '<img src="' + product.banner + '">' +
                        '</div>' +
                        '<div class="moldbaby-subject-title">' + getProductName(product.name) + '</div>' +
                        '<div class="clearfix">' +
                        '<div class="curr-price">现价:¥' + product.discountPrice.toFixed(2) + '</div>' +
                        '<div class="other-price">' +
                        '<div style="margin-bottom:5px">原价:¥' + product.price.toFixed(2) + '</div>' +
                        '<div>立省:¥' + (product.price - product.discountPrice).toFixed(2) + '</div>' +
                        '</div>' +
                        '</div>' +
                        '<div class="go-shop">去购物</div>' +
                        '</div>';
                }
                $(".moldbaby").html(html);

                $(".moldbaby-subject").click(function () {
                    var index = $(this).attr("index");
                    location.href = "productDetail.html?prodId=" + data[index].prodId;
                });
            }
        });
    }
    function getProductName(productName) {
        if (productName.length > 30) {
            productName = productName.substr(0, 28) + "...";
        }
        return productName;
    }

    function getShop(page) {
        var param = {};
        param.page = page;
        param.size = 5;
        app.getShopList(param, function (result) {
            if (result.code == 200) {
                var html = "";
                var data = result.data.list;
                if (data.length == 0) {
                    $(".shop-list").html("");
                    return;
                }
                for (var i = 0; i < data.length; i++) {
                    var shop = data[i];
                    html += '<div class="shop" index="' + i + '">' +
                        '<div class="shop-logo "><img src="' + getShopImage(shop.site) + '"></div>' +
                        '<div class="shop-desc">' +
                        '<div class="shop-name">' + shop.webShop + '</div>' +
                        '<div class="shop-type"><span>商城：</span><span>' + getShopType(shop.site) + '</span></div>' +
                        '<div class="shop-addr"><span>地区：</span><span>' + shop.shopAddr + '</span></div>' +
                        '</div>' +
                        '</div>';
                }
                $(".content-list").html(html);

                $(".shop").click(function () {
                    var index = $(this).attr("index");
                    window.open("shopDetail.html?shopId=" + data[index].id + "&shopImg=" + getShopId(data[index].type));
                });
            }
        });
    }
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cspan id='cnzz_stat_icon_1261882558'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1261882558%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>
</html>